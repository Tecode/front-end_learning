# 15、文件服务

## FTP 端口 `20 21`

```shell
[root@CentOs8 ~]# yum list | grep vsftpd

[root@CentOs8 ~]# systemctl start vsftpd
[root@CentOs8 ~]# systemctl status vsftpd
● vsftpd.service - Vsftpd ftp daemon
   Loaded: loaded (/usr/lib/systemd/system/vsftpd.service; disabled; vendor preset: disabled)
   Active: active (running) since Mon 2021-12-20 22:10:53 CST; 8s ago
  Process: 3774205 ExecStart=/usr/sbin/vsftpd /etc/vsftpd/vsftpd.conf (code=exited, status=0/SUCCESS)
 Main PID: 3774206 (vsftpd)
    Tasks: 1 (limit: 10766)
   Memory: 592.0K
   CGroup: /system.slice/vsftpd.service
           └─3774206 /usr/sbin/vsftpd /etc/vsftpd/vsftpd.conf

12月 20 22:10:53 CentOs8.2 systemd[1]: Starting Vsftpd ftp daemon...
12月 20 22:10:53 CentOs8.2 systemd[1]: Started Vsftpd ftp daemon.

[root@CentOs8 ftp]# ll /var/ftp/
总用量 0
drwxr-xr-x 2 root root 6 4月  22 2021 pub
```

### 访问FTP

浏览器输入：[ftp://47.108.210.200](ftp://47.108.210.200)

#### 配置文件

上传需要开启文件夹权限

```shell
vim /etc/vsftpd/vsftpd.conf 

# Beware that on some FTP servers, ASCII support allows a denial of service
# attack (DoS) via the command "SIZE /big/file" in ASCII mode. vsftpd
# predicted this attack and has always been safe, reporting the size of the
# raw file.
# ASCII mangling is a horrible feature of the protocol.
#ascii_upload_enable=YES
#ascii_download_enable=YES
#
# You may fully customise the login banner string:
#ftpd_banner=Welcome to blah FTP service.
#
# You may specify a file of disallowed anonymous e-mail addresses. Apparently
# useful for combatting certain DoS attacks.
#deny_email_enable=YES
# (default follows)
#banned_email_file=/etc/vsftpd/banned_emails
#
# You may specify an explicit list of local users to chroot() to their home
# directory. If chroot_local_user is YES, then this list becomes a list of
# users to NOT chroot().
# (Warning! chroot'ing can be very dangerous. If using chroot, make sure that
# the user does not have write access to the top level directory within the
# chroot)
#chroot_local_user=YES
#chroot_list_enable=YES
# (default follows)
#chroot_list_file=/etc/vsftpd/chroot_list
#
# You may activate the "-R" option to the builtin ls. This is disabled by
# default to avoid remote users being able to cause excessive I/O on large
# sites. However, some broken FTP clients such as "ncftp" and "mirror" assume
# the presence of the "-R" option, so there is a strong case for enabling it.
#ls_recurse_enable=YES
#
# When "listen" directive is enabled, vsftpd runs in standalone mode and
# listens on IPv4 sockets. This directive cannot be used in conjunction
# with the listen_ipv6 directive.
listen=NO
#
# This directive enables listening on IPv6 sockets. By default, listening
# on the IPv6 "any" address (::) will accept connections from both IPv6
# and IPv4 clients. It is not necessary to listen on *both* IPv4 and IPv6
# sockets. If you want that (perhaps because you want to listen on specific
# addresses) then you must run two copies of vsftpd with two configuration
# files.
# Make sure, that one of the listen options is commented !!
listen_ipv6=YES

pam_service_name=vsftpd
userlist_enable=YES
```

### `lftp`

```shell
haoxuan@haoxuandeMacBook-Pro crm-front % lftp 47.108.210.200
haoxuan@haoxuandeMacBook-Pro crm-front % ls
haoxuan@haoxuandeMacBook-Pro crm-front % get file.text
```

## NFS

### 安装

```shell
yum install -y nfs-utils
```

### 配置文件

```shell
vim /etc/exports
```

## SSH SERVER